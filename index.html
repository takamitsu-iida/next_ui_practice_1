<!DOCTYPE html>
<html lang="ja" ng-app="iida.app">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <!-- IE9以降で正しく機能するようにする -->
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />

  <!-- description -->
  <meta name="description" content="NeXt UI trial application">
  <meta name="keywords" content="NeXt angular angularjs material">
  <meta name="author" content="Takamitsu IIDA">

  <!-- viewportの設定 -->
  <!-- width=device-width 表示領域の幅を端末画面の幅に設定 -->
  <!-- initial-scale=1 表示倍率を１倍に設定 -->
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- faviconの設定 -->
  <!--
  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="bookmark" href="/favicon.ico" />
  -->

  <!-- ブラウザのウィンドウやタブに表示されるタイトル -->
  <title>NeXt trial</title>

  <!-- Font Awesome -->
  <link href="./static/font-awesome-4.6.3/css/font-awesome.css" rel="stylesheet">

  <!-- AngularJS -->
  <!-- ローカルからの読み込み -->
  <script src="./static/angular-1.5.8/angular.min.js"></script>
  <!-- CDNからの読み込み -->
  <!-- <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"> -->
  <!-- <script>window.angular || document.write('<script src="./static/angular-1.5.8/angular.min.js"><\/script>')</script> -->

  <!-- Angular Resource -->
  <script src="./static/angular-1.5.8/angular-resource.min.js"></script>

  <!-- Angular animate -->
  <script src="./static/angular-1.5.8/angular-animate.min.js"></script>

  <!-- Angular aria -->
  <script src="./static/angular-1.5.8/angular-aria.min.js"></script>

  <!-- Angular messages -->
  <script src="./static/angular-1.5.8/angular-messages.min.js"></script>

  <!-- Angular material -->
  <!-- ローカルからの読み込み -->
  <script src="./static/angular-material-1.1.1/angular-material.min.js"></script>
  <link href="./static/angular-material-1.1.1/angular-material.min.css" rel="stylesheet">
  <!-- CDNからの読み込み -->
  <!-- <script src="//ajax.googleapis.com/ajax/libs/angular_material/1.1.1/angular-material.min.js"></script> -->
  <!-- <link href="//ajax.googleapis.com/ajax/libs/angular_material/1.1.1/angular-material.min.css" rel="stylesheet"> -->

  <!-- Angular materialはRobotoフォントを前提にしているが、使わない -->
  <!-- <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900,300italic,400italic,500italic,700italic,900italic"> -->

  <!-- Angular UI Router -->
  <script src="./static/angular-ui-router-0.2.18/angular-ui-router.min.js"></script>

  <!-- NeXt UI Toolkit -->
  <script src="./static/next-0.10.0-Boron/js/next.min.js"></script>
  <link rel="stylesheet" href="./static/next-0.10.0-Boron/css/next.min.css">

  <!-- サイトのCSS -->
  <link href="./static/site/css/site.css" rel="stylesheet">

  <!-- サイトのJavaScript -->
  <script src="./static/site/js/iida.startup.js"></script>
  <script src="./static/site/js/iida.topologyData1.js"></script>
  <script src="./static/site/js/iida.topologyData2.js"></script>
  <script src="./static/site/js/iida.topologyData3.js"></script>
  <script src="./static/site/js/iida.topologyData4.js"></script>
  <script src="./static/site/js/iida.topologyDataIcons.js"></script>
  <script src="./static/site/js/iida.nextui.js"></script>
  <script src="./static/site/js/iida.main.js"></script>

</head>

<!--
    <body>には画面レイアウトを制御する最上位のコントローラtopControllerをバインドする。
    style="overflow: hidden;" ウィンドウのスクロールバーは出さない。
    サイドナビを使うとスクロールバーと相性が悪い。スクロールバーが必要な場所にはmd-contentを使うこと。
-->
<body flex layout-fill layout="column" ng-cloak ng-controller="topController as tc" style="overflow: hidden;">

  <!-- 縦並びの上から１個目は常時表示するナビゲーション用のツールバー -->
  <!-- ツールバーをbody直下に置かないと、後続のDIVのサイズ取得がうまくいかない -->
  <md-toolbar>
    <div class="md-toolbar-tools">

      <!-- ロゴを表示する。ボタンにすると全部大文字になってしまうので、単純なアンカーにする -->
      <h1><a href="#">{{:: tc.logoTitle }}</a></h1>

      <!-- 右寄せするためのspan -->
      <span flex></span>

      <!-- リンク -->
      <span ng-repeat="link in tc.links">
        <md-button aria-label="{{:: link.label}}" ng-href="{{:: link.url}}" target="_blank">{{:: link.title}}</md-button>
        <md-tooltip>{{:: link.label}}</md-tooltip>
      </span>

      <!-- github -->
      <md-button aria-label="github" class="md-icon-button" ng-href="{{:: tc.githubUrl }}" target="_blank">
        <md-icon md-font-icon="fa-github" class="fa fa-2x"></md-icon>
        <md-tooltip>github</md-tooltip>
      </md-button>

      <!-- 設定用アイコン -->
      <md-button aria-label="setting" class="md-icon-button" ng-controller="settingDialogController as sc" ng-click="sc.showDialog()">
        <md-icon md-font-icon="fa-gear" class="fa fa-2x"></md-icon>
        <md-tooltip>設定</md-tooltip>
      </md-button>

    </div>
  </md-toolbar>

  <!-- 縦並びの上から２個目はui-routerのコンテナにして、URLごとに内容を差し替える -->
  <div flex ui-view></div>

</body>

<!--
  以下、先読みスクリプト
-->

<!--
    トップページ
    index
    url: '/',
    templateUrl: 'index.tpl',
    controller: 'indexController',
    controllerAs: 'indexCtrl'
-->
<script type="text/ng-template" id="index.tpl">

  <md-content md-component-id="index" flex layout="row" layout-margin layout-align="center start">
    <md-card flex="66" layout-padding>

      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">{{:: indexCtrl.title }}</span>
        </md-card-title-text>
      </md-card-title>

      <md-card-content>
        <p>{{:: indexCtrl.description }}</p>
        <md-list-item class="md-3-line">
          <div class="md-list-item-text" layout="column" layout-align="start start">
            <h3>{{:: indexCtrl.author }}</h3>
            <h4>{{:: indexCtrl.date }}</h4>
            <p>{{:: indexCtrl.mail }}</p>
          </div>
        </md-list-item>
      </md-card-content>

      <md-card-actions layout="column" layout-align="start">
        <md-button aria-label="NeXt practice" class="md-primary md-raised" ng-if="!indexCtrl.isie" ui-sref="next">スタート</md-button>
        <md-tooltip ng-if="!indexCtrl.isie">ここをクリックして開始</md-tooltip>
        <span ng-if="indexCtrl.isie">ブラウザがIEのため、ここから先には進めません。Chromeで再接続してください。</span>
      </md-card-actions>

    </md-card>
  </md-content>

</script>


<!--
  NeXt UI練習ページ
  next
  url: '/next',
  templateUrl: 'next.tpl',
  controller: 'nextController',
  controllerAs: 'nextCtrl'
-->
<script type="text/ng-template" id="next.tpl">

  <!-- layout="row" 1行に収める -->
  <div layout="row" flex layout-fill layout-padding>

    <!-- 左側 -->
    <div flex>
      <h3>{{::nextCtrl.title}}</h3>
      <p>{{::nextCtrl.description}}</p>
      <md-button aria-label="実験1" class="md-raised" ng-click="nextCtrl.doTest1()">
        パス追加実験<md-tooltip>id=0のリンクの上にパスを描画します</md-tooltip>
      </md-button>
      <md-button aria-label="実験2" class="md-raised" ng-click="nextCtrl.doTest2()">
        ステータス追加実験<md-tooltip>偶数番ノードに赤、奇数に緑のドットを付けます</md-tooltip>
      </md-button>
      <md-button aria-label="実験3" class="md-raised" ng-click="nextCtrl.doTest3()">
        選択中のノードを取得<md-tooltip>選択中のノード一覧を取得してコンソールに出力します</md-tooltip>
      </md-button>
      <md-button aria-label="実験4" class="md-raised" ng-click="nextCtrl.doTest4()">
        id=0のノードを選択<md-tooltip>id=0のノードを選択します</md-tooltip>
      </md-button>
      <!-- NeXt UIのシェルを組み込むカスタムディレクティブ -->
      <iida-nx-shell topology-container="nextCtrl.getTopologyContainer()" flex layout-fill></iida-nx-shell>
    </div>

    <!-- 右側 -->
    <!-- サービスが保持しているデータ一覧を常時表示する -->
    <md-content md-component-id="main-right" class="md-whiteframe-3dp" flex-sm="40" flex-gt-sm="35" flex-gt-md="33" layout-align="end start">
      <div flex layout="row" layout-align="start center">
        <h3>データ表示</h3> <span flex></span>
        <md-button aria-label="edit" class="md-icon-button" ng-controller="editorDialogController as ec" ng-click="ec.showDialog()">
          <md-icon md-font-icon="fa-pencil-square-o" class="fa fa-2x"></md-icon>
          <md-tooltip>編集</md-tooltip>
        </md-button>
      </div>

      <p><md-divider></md-divider></p>

      <div ng-controller="dataController as dataCtrl">
        <pre>{{dataCtrl.getTopologyData() | json}}</pre>
      </div>
      <!--
      <form name="editorForm" ng-controller="dataController as dataCtrl">
        <p ng-show="editorForm.editor.$error.json">JSON is invalid!</p>
        <md-input-container class="md-block">
          <label>JSONデータ</label>
          <textarea name="editor" autocomplete="off" ng-model="dataCtrl.obj" json-editor md-select-on-focus></textarea>
        </md-input-container>
      </form>
      -->
    </md-content>

  <!-- 左右に割った行のおわり -->
  </div>

<!-- next.tpl 終わり -->
</script>


<!--
  設定ダイアログのテンプレート
  controllerAs: 'sc',
  templateUrl: 'setting.tpl',
  parent: angular.element(document.body)
-->
<script type="text/ng-template" id="setting.tpl">

  <md-dialog aria-label="Setting" flex="40">
    <!-- ダイアログの上段にツールバーを使ってタイトルを付ける -->
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>Setting</h2> <span flex></span>
        <md-button aria-label="close dialog" class="md-icon-button" ng-click="sc.cancel()">
          <md-icon md-font-icon="fa-times" class="fa fa-2x"></md-icon>
        </md-button>
      </div>
    </md-toolbar>

    <!-- ダイアログのコンテンツ -->
    <md-dialog-content>
      <!-- md-dialog-contentクラスを使うと、いい具合にパディングされる -->
      <div class="md-dialog-content">
        <!-- debug -->
        <md-switch ng-model="sc.settingParam.debug" aria-label="Switch debug">
          debug: {{ sc.settingParam.debug }}
        </md-switch>
        <p><md-divider></md-divider></p>
        <!-- topologyDataIndex -->
        <p>データ選択</p>
        <md-radio-group ng-model="sc.settingParam.topologyDataIndex">
          <md-radio-button value="0"> 2ノード(簡易) </md-radio-button>
          <md-radio-button value="1"> 3ノード(各種プロパティあり) </md-radio-button>
          <md-radio-button value="2"> 5セット </md-radio-button>
          <md-radio-button value="3"> ノードセット </md-radio-button>
          <md-radio-button value="4"> アイコン一覧 </md-radio-button>
        </md-radio-group>
      </div>
    </md-dialog-content>

    <!-- ダイアログの最下部、フッタ部分にボタンを配置する -->
    <md-dialog-actions layout="row">
      <span flex></span>
      <md-button ng-click="sc.answer('ok')" md-autofocus>OK</md-button>
      <md-button ng-click="sc.answer('cancel')">Cancel</md-button>
    </md-dialog-actions>
  </md-dialog>

</script>


<!--
  編集ダイアログのテンプレート
  controllerAs: 'ec',
  templateUrl: 'editor.tpl',
  parent: angular.element(document.body)
-->
<script type="text/ng-template" id="editor.tpl">

  <md-dialog aria-label="Setting" flex-sm="90" flex-gt-sm="80" flex-gt-md="66">
    <!-- ダイアログの上段にツールバーを使ってタイトルを付ける -->
    <md-toolbar>
      <div class="md-toolbar-tools">
        <h2>{{:: ec.title}}</h2>
        <span flex-offset="5" ng-show="editorForm.editor.$error.json">JSON is invalid!</span>
        <span flex></span>
        <md-button aria-label="close dialog" class="md-icon-button" ng-click="ec.cancel()">
          <md-icon md-font-icon="fa-times" class="fa fa-2x"></md-icon>
        </md-button>
      </div>
    </md-toolbar>

    <!-- ダイアログのコンテンツ -->
    <md-dialog-content>
      <!-- class="md-dialog-content"を使うと、いい具合にパディングされるが、ここでは使わない -->
      <form name="editorForm">
        <md-input-container class="md-block">
          <textarea aria-label="editor" name="editor" autocomplete="off" ng-model="ec.obj" json-editor></textarea>
        </md-input-container>
      </form>
    </md-dialog-content>

    <!-- ダイアログの最下部、フッタ部分にボタンを配置する -->
    <md-dialog-actions layout="row">
      <span flex></span>
      <md-button class="md-primary md-raised" ng-disabled="editorForm.editor.$error.json" ng-click="ec.answer('ok')" md-autofocus>OK</md-button>
      <md-button ng-click="ec.answer('cancel')">Cancel</md-button>
    </md-dialog-actions>
  </md-dialog>

</script>

</html>
